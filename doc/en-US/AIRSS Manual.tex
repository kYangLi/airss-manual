%! TEX program = pdflatex
% Author: Yang Li
% Date: 2020.10.24-2020.10.28
% copyleft liyang@Tsinghua Univ.
%

\documentclass[a4paper, 10pt]{article}
%===================== Common Set ======================
\usepackage[colorlinks=true]{hyperref}
\usepackage{amsmath}
\usepackage{indentfirst}
\setlength{\parindent}{2em}
%===================== Table Env. ======================
\usepackage{float}
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
%===================== List Env. =======================
\usepackage[T1]{fontenc}
\usepackage[charter]{mathdesign}
\usepackage{eulervm}
\usepackage{mathtools,enumitem,lipsum}
\newlist{maineu}{enumerate}{1}
\setlist[maineu]{label=\arabic*.,align=right,leftmargin=2em,itemsep=2pt}
\newlist{subeu}{enumerate}{2}
\setlist[subeu]{label=(\alph*),align=right,widest=i,labelsep=3pt,itemsep=0pt}
%=============== Lstlisting Code Supp. =================
\usepackage{listings}
\usepackage{xcolor}
\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.93,0.93,0.93}
\definecolor{mymauve}{rgb}{0.58,0,0.82}
\definecolor{myblue}{rgb}{0.76,0.8,1}
\lstset{%
frame=shadowbox,
backgroundcolor=\color{mygray},
basicstyle=\footnotesize\ttfamily,
columns=fixed,
tabsize=2,
breaklines=ture,
captionpos=b,
commentstyle=\color{blue},
escapeinside={\%*}{*)},
keywordstyle=\color{mygreen}\bfseries,
stringstyle=\color{mymauve}\ttfamily,
rulesepcolor=\color{myblue},
otherkeywords={user@machine_name\$,root@machine_name\#}
}
\lstdefinelanguage{bash}{%
morekeywords={user@machine_name\$,root@machine_name\#},
morecomment=[l]{\#},
}
%========================================================

\title{\textbf{AIRSS Manual}}
\author{Yang Li\\ \href{mailto:lyang.1915@gmail.com}{lyang.1915@gmail.com}}
\date{2020.10.28}

\begin{document}
\maketitle
\tableofcontents

\newpage
\section{About AIRSS}
AIRSS(\textbf{A}b \textbf{I}nitio \textbf{R}andom \textbf{S}tructure \textbf{S}earching) is a first-principles structure searching software developed by professor \href{https://www.mtg.msm.cam.ac.uk/People/CJP}{Chris Pickard} in Cambridge University. It is an open-source software protected by the \href{https://en.wikipedia.org/wiki/GNU_General_Public_License}{\textbf{GPL2 license}}. Visit its official website, \url{https://www.mtg.msm.cam.ac.uk/Codes/AIRSS}, to get the source package. 

The ``structure searching'' refers to such a process: for a system with unknown atomic structure but under certain physical conditions (such as atomic distance, distribution density, element composition, element ratio, etc.), widely guessed its configuration, relax them using some DFT software, calculating its energy, and finally obtaining the most (or several) stable atomic structure. Obviously, the manual guessing or blindly traversal search is extremely awkward, time-consuming, and even difficult to achieve. Therefore, it is necessary to use a set of mature structure search software, systematically and cleverly capture the stable configuration of the system.

AIRSS is exactly such kind of software! Professor Chris's introduction about this software can refer to the \href{https://www.youtube.com/watch?v=xW6pOYEIKVs&t=1061s}{relevant video}. There are also another two more commonly used structure searching software: \href{https://uspex-team.org/en/uspex/downloads}{USPEX} and \href{http://www.calypso.cn}{CALYPSO}.

Unlike the \href{https://en.wikipedia.org/wiki/Genetic_algorithm}{genetic algorithm} used in USPEX or CALYPSO, AIRSS is based on a completely random structure searching strategy, and the different structures it produces are completely random and independent. Such an algorithm is very conducive to the parallel implementation of search tasks.\footnote{For example, we can use AIRSS to randomly generate 1000 structures, and then relax them independently} The effectiveness of this random method is also discussed in professor Chris' articles on AIRSS.\footnote{ [1] PRL 97, 045504 (2006); [2] JPCM 23, 053201 (2011)} The most powerful feature of this random method of AIRSS lies in its many flexible adjustable parameters, which can be said to be the most outstanding feature of this project. The user experience of AIRSS gives a feeling of ``point-and-shoot camera \emph{vs.} professional SLR camera''. The former is simple and practical, you can submit various tasks with one click and get some results not bad. The latter has many buttons and options, which can be customized to produce a variety of more professional and refined results. The former sacrifices flexibility for ease of operation; the latter opposite. AIRSS can highly customize the characteristics of research objects according to user needs.

Regrettably, as a powerful structure searching software, AIRSS's \href{https://airss-docs.github.io/technical-reference/buildcell-manual/}{official manual} is still under building. In addition, the relevant documentation or tutorials on the Internet are also very scarce, so most people are not familiar with such an extremely excellent program in the material design.


In order to make up for this shortcoming, the author decided to write this article. The following content is not a formal manual or tutorial, but only some records of learning AIRSS. Most of the conclusions of this article are derived from analyzing the source code, and running the program. \footnote{Although the official does not give a complete user manual, it does provide a large number of usage examples, located in the example directory of the program, for users to learn from.} \textbf{Limited by various factors, the errors in understanding and interpretation may be inevitable. If you find any questions or errors, feel free to contact and correct me!}


\newpage
\section{Prepare Work}
\subsection{Linux Operating System} 
Before reading this record, you need to have a certain understanding of the Linux operating system. For example, to understand the meaning of the following commands:
\begin{lstlisting}[language={bash}]
user@machine_name$ ls | grep *.cell
\end{lstlisting}

And catastrophic accidents that can be caused by the following command:
\begin{lstlisting}[language={bash}]
root@machine_name# rm -rf / home/user_name/trash_directory
\end{lstlisting}

Another thing that needs special reminder is that certain characters in this PDF are not recognized by the command line (such as the `minus' in `ls  \(-\)1', although they look extremely the same as the `minus' we typed in the command line). \textbf{Please be careful when directly copying commands or characters in this document.}

\subsection{Program Installation and Remove}

The latest \verb|airss-0.9.1| has made a lot of simplifications in the installation process, you can read the  README file in AIRSS to install it.

The management script of AIRSS is written in perl language, and can only be installed in the *nix system, used in command line. Before installing this software, you'd better learn how to use \href{https://www.gnu.org/software/make/manual/}{GNU make}.

\subsection{Run AIRSS}
For your first time using AIRSS, you can enter the command `\verb|airss.pl|' in terminal to view the AIRSS welcome interface.

\newpage
\begin{lstlisting}[language={bash}]
user@machine_name$ airss.pl

      .o.       ooooo ooooooooo.    .oooooo..o  .oooooo..o 
     .888.      '888' '888   'Y88. d8P'    'Y8 d8P'    'Y8 
    .8:888.      888   888   .d88' Y88bo.      Y88bo.      
   .8' '888.     888   888ooo88P'   ':Y8888o.   ':Y8888o.  
  .88ooo8888.    888   888'88b.         ':Y88b      ':Y88b 
 .8'     '888.   888   888  '88b.  oo     .d8P oo     .d8P 
o88o     o8888o o888o o888o  o888o 8::88888P'  8::88888P'  
                                                      
     Ab Initio Random Structure Searching             
     Chris J. Pickard   (cjp20@cam.ac.uk)            
            Copyright (c) 2005-2018                   
                                                      
Please cite the following:                                 
                                                      
[1] C.J. Pickard and R.J. Needs, PRL 97, 045504 (2006)     
[2] C.J. Pickard and R.J. Needs, JPCM 23, 053201 (2011)    

Usage: airss.pl [-pressure] [-build] [-pp0] [-pp3] [-gulp] 
                [-lammps] [-gap] [-psi4] [-cluster] [-slab] 
                [-dos] [-workdir] [-max] [-num] [-amp] [-mode] 
                [-minmode] [-sim] [-symm] [-nosymm] [-mpinp] 
                [-steps] [-best] [-track] [-keep] [-seed]
  -pressure f  Pressure (0.0)
  -build       Build str. only (false)
  -pp0         Use pair potentials rather than Castep (0D) (false)
  -pp3         Use pair potentials rather than Castep (3D) (false)
  -gulp        Use gulp rather than Castep (false)
  -lammps      Use LAMMPS rather than Castep (false)
  -gap         Use GAP through QUIP/QUIPPY/ASE (false)
  -ps4         Use psi4 (false)
  -vasp        Use VASP (false)
  -cluster     Use cluster settings for symmetry finder (false)
  -slab        Use slab settings (false)
  -dos         Calculate DOS at Ef (false)
  -workdir  s  Work directory ('.')
  -max      n  Maximum number of str. (1000000)
  -num      n  Number of trials (0)
  -amp      f  Amplitude of move (-1.5)
  -mode        Choose moves based on low lying vmodes (false)
  -minmode  n  Lowest mode (4)
  -sim      f  Threshold for structure similarity (0.0)
  -symm     f  Symmetrise on-the-fly (0.0)
  -nosymm   f  No symmetry (0)
  -mpinp    n  Number of cores per mpi Castep (0)
  -steps    n  Max number of geometry optimisation steps (400)
  -best        Only keep the best str. for each compos. (false)
  -track       Keep the track of good str. during RESH(false)
  -keep        Keep intermediate files (false)
  -seed     s  Seedname ('NONE')
user@machine_name$
\end{lstlisting}

\verb|airss.pl| is the main command to perform structure search using AIRSS. The usage of this command has been briefly explained in the welcome interface. The table in the usage explanation has three columns. The first column is the name of the option; the second is the type of the input parameter following this option, `\verb|f|' represents a floating point number, `\verb|n|' represents an integer, `\verb|s|' represents a string, and ``empty'' represents no need for extra parameters. The third column is a brief description of the corresponding option.

\newpage
\section{Custom Random Structure}

The core component of AIRSS is named \textbf{buildcell}. The function of this component is to generate a series of initial atomic configurations with random structures while meeting the constraints given by the user. We can actually take out this module independently, and adapt it to other programs (such as VASP). Learning to write highly customized *.cell files is the foundation of learning AIRSS.

In order to facilitate the subsequent description, we first need to briefly introduce the basic logic of the buildcell component.

\noindent\fcolorbox{mygray}[HTML]{E7E7E7}{\parbox{\textwidth}{%
\noindent \textbf{The execution of the buildcell block is roughly divided into the following steps:}
\begin{maineu}
\item Read the configuration information in the *.cell file through the cell.f90 module.
\item Generate a structure that meets the requirements through build.f90, opt.f90 etc.
  \begin{subeu}
    \item First, according to the given initial cell, adjust the volume of the cell in the ratio of 0.95-1.05, and generate the lattice parameters that meet the volume. If there is a lattice tag\footnote{If you feel unfamiliar with the concepts in this part, you can skip this paragraph first, and a more detailed introduction will be presented later.} \#FIX, ignore this step.
    \item Under the premise of meeting the requirements, generated an atom at a random position.
    \item Choose according to constraints: accept this position, reject this position, or \textbf{PUSH} the current atom. \textbf{PUSH} means: move two atoms that are too close to each other in the direction of their connection, and move them away Same distance. When there is FIX or NOMOVE in the atom label, ignore this operation.
    \item Traverse all the atoms in the system until the complete structure is updated.
    \item Depending on the user's setting, use the phenomenological pair potential (pp3) to simply relax the structure.
  \end{subeu}
\item Output the above random structure that meets the requirements through the buildcell.f90 module.
\end{maineu}}}

\subsection{File Structure of *.cell}

The *.cell file is the ``seed file'' of the structure search. You can set search constraints in this file. The asterisk (*) before the file name represents a wildcard under the Linux system, that is, it represents any strings. In the AIRSS file system, we refer to the part before the suffix as the ``seed name''. Seed name can be used to distinguish the same kind of files of different calculations.

\noindent\fcolorbox{mygray}[HTML]{E7E7E7}{\parbox{\textwidth}{%
\noindent \textbf{*.cell file has the following characteristics:}
\begin{maineu}
\item Since AIRSS was written by those who participated in the development of CASTEP, the program is extremely friendly to CASTEP, and the *.cell file here is fully compatible with the *.cell file in CASTEP.
\item When setting parameters in the *.cell file, you need to use certain keywords to indicate the meaning of the set parameters.
\item AIRSS completely reuses the keywords of CASTEP for structural declaration, such as LATTICE\_CART, etc.
\item The built-in keywords of AIRSS usually start with \#, such as \#RASH. (To make the *.cell file of AIRSS fully compatible with CASTEP)
\item *.cell file is mainly composed of two parts: ``structure data'' and ``global parameters''. Correspondingly, keywords in the file can also be divided into the above two categories.
\item There is no restriction on the order of writing between any keywords.
\item All keywords set in *.cell need to be written in \textbf{capital letters}, and \textbf{cannot add spaces} between keywords, equal signs and parameter values. At the same time, any blank lines will be automatically ignored.
\item This file uses double pound signs (\#\#) to indicate the content of the comments.
\item Although the program allows multiple keywords to appear in a single line, it is better to write only one keyword per line for the purpose of standardization and readability of the written file.
\end{maineu}}}\\

Next, we will introduce the specific writing method of *.cell file. Whether you can use AIRSS efficiently depends exzactly on whether you can master the content of the following pages. Compared with those ``no one cared'' sections , such as ``about AIRSS'', the following sections are the core contents of the article, so let up use this ``golden position'' to discuss some issues about the AIRSS program design, which is quite beneficial for the better use of this software.

The problem that the structure search wants to solve is actually quite well-defined. Imagine a \(N\)-dimensional phase space, where different dimensions of the space represent different variable parameters of the structure (such as atomic ratio, lattice basis vector, atomic position, etc.), each point in the space represents a different atomic structures, and each structure corresponds to an energy value. So there will be a \(N+1\)-dimensional energy surface (eg. if our phase space is two-dimensional, then there will be a three-dimensional energy surface). What the structure search does is to find some/all energy minimum points of this energy surface, and then determine the global minimum.

One way to solve this problem is to use some very clever algorithms (such as genetic algorithms or machine learning) to make the system ``evolve'' based on different metastable configurations, and find the most stable configuration. The implementation steps of the algorithm are as follows: initially generate a series of random structures; then use first-principle calculation software to relax these configurations, inherit/learn the characteristics of low-energy structures from the relaxation results; then use the information learned from the previous generation to generate the next-generation structure; iterate in this way, and finally, we expect to find a global stable structure. The advantage of this algorithm is that it can quickly locate the energy minimum point in a large phase space, which does not rely on any prior information.  But at the same time, due to the causal relationship between the previous generation and the next generation structure, the structure of different generations can only be calculated in sequence (serial). In addition, using this type of algorithm will also face a big challenge, ``phase space collapse'' (that is, due to the limitations of the selection of the initial structures, the subsequent new structures are all localized in certain sub-regions.). In order to solve this problem, we have to introduce an adjustable parameter: ``mutation probability'' (a certain probability that randomly change the structure in some way). But under some circumstances (such as the mutation probability are too high or too low), this parameter is not as effective as we thought.

AIRSS uses another structure searching strategy. Its *.cell file provides a large number of adjustable parameters, and each parameter corresponds to a number of constraints, which puts \textbf{precise restrictions on the phase space}. The system that meets these constraints are generated randomly. Then, using the first-principle calculation, we can find the stable/meta-stable structure near the inital (random) structure. Through large-scale (such as thousands or tens of thousands of times) ``search'', combined with the \textbf{structural duplicate check algorithm}, we can finally find a global most stable state in the constrained phase space. Such a steady state probably has two characteristics: \textbf{the energy is lower (the lowest)}, and \textbf{the number of repetitions is more (the most)}.

The strategy of ``random selection'' of the initial structure at first sounds unreasonable and extremely inefficient, but if the phase space obtained after ``precision constraints'' is not very large, then even if do not use those very complicated genetic algorithm, it can also obtain good results. At the same time, the random setting of the initial structure ensures the \textbf{efficiency of parallel computing} while avoiding the occurrence of ``phase space collapse''.

Perhaps seeing this, you will argue that if we set the first generation in the genetic algorithm as many as in the AIRSS, such as 10,000, the final result is not much better than the AIRSS algorithm, after all, AIRSS is only equivalent to the first step of the genetic algorithm? But the fact is that in a small phase space, the difference between the 10,000 configurations per generation to iterate for 100 generations, and directly use 1,000,000 random structure relaxation calculations are actually not big, and sometimes the latter is more accurate. And just saying ``10,000 configuration iterations for 100 generations per generation'' would feel ridiculous, because this kind of calculation requires massive computing resources. Generally, the number of configurations in each generation in the order of 100. So I prefer to think that these two algorithms are complementary, one is suitable for serially finding some low-energy extreme points in a super large phase space, and the other is suitable for finding all extreme points in a small phase space that is tightly restricted. And according to my experience, the performance of AIRSS in a larger phase space is not as bad as you may thought. Because for the phase space that actually meets the physical constraints, there actually only are a small number of (meta-)stable points (see the explanation of the conception \textbf{basin} in \href{https://www.youtube.com/watch?v=xW6pOYEIKVs&t=1061s}{this video}). Find these (meta-)stable points from an initial point that looks random is actually within the range of DFT relaxation ability.

From the other point of view, using the strategy that \textbf{accurately limits the size of the phase space} plus \textbf{random search} is a very strange but effective idea for structure searching. Because most of the time, we do not need to predict a structure completely theoretically, but cooperate with experiments (eg. experiments have already known the element ratio and crystal shape, and sometimes even the approximate atomic position can be known through electron microscopy), and jointly study the atomic structure of a certain material. At this time, the variable phase space of atoms may not be very large, so ``how to define the phase space under study more precisely'' has become a more important issue than ``how to optimize the algorithm to get the minimum point faster''. We know that almost all the time in structure search is spent on structure relaxation. If we have 8000 cores in our hands, use 8 Each core optimizes a configuration, then at the same time we can search for 1000 structures at the same time. If there are 80,000 cores (of course, this is almost impossible), then 10,000 structures can be calculated at the same time This simple, rude and efficient parallel method perform extremely well than other algorithms. In many cases (especially when working with experiments to search for atomic structures), it is very efficient.

\noindent\fcolorbox{mygray}[HTML]{E7E7E7}{\parbox{\textwidth}{%
\noindent \textbf{At present, the functions of the parameters available in the *.cell file can be divided into the following categories:}
\begin{maineu}
  \item \textbf{Declare the initial lattice structure.} For example, declare the initial unit cell basis vector, initial atomic position, etc.
  \item \textbf{Constraints on unit cell parameters.} Such as fixing the initial lattice base vector, constraining the unit cell system, constraining the degree of change of the unit cell, constraining the crystal system of the unit cell, adding a vacuum layer to the unit cell, whether to expand the cell, etc.
  \item \textbf{Requirements for the chemical formula of the system.} For example, there are how many elements in the system, whether the electrons can be balanced (whether there are dangling bonds), etc.
  \item\textbf{Restrictions on the position of atoms.} Such as the shortest distance between two atoms, the maximum/minimum distance of an atom from the initial position, the coordination number of an atom, etc.
  \item \textbf{Restrictions on the symmetry of the system.} For example, the system has several symmetry operations, in what space group, the degree of fineness of symmetry search, whether to introduce symmetry breaking disturbances, etc.
  \item \textbf{Adjustment to the search algorithm of the program itself.} For example, accept the upper limit of the number of search failures, whether to introduce PSUH, whether to introduce TPSD, whether to introduce RASH, etc.
  \item (Less commonly used) Add a force field covering the entire unit cell in the crystal. For example, add a spherical force field, an ellipsoidal force field, a strip force field, a plane force field, etc.
\end{maineu}}}\\

The following is the \verb|Al.cell| file used to predict the structure of metal aluminum:
\begin{lstlisting}[language={bash},numbers=left,firstnumber=0]
user@machine_name$ cat Al.cell
%BLOCK LATTICE_CART
2 0 0
0 2 0
0 0 2 
%ENDBLOCK LATTICE_CART

%BLOCK POSITIONS_FRAC
Al 0.0 0.0 0.0 # Al1 % NUM=8
%ENDBLOCK POSITIONS_FRAC

#MINSEP=1.5
user@machine_name$
\end{lstlisting}


\noindent\fcolorbox{mygray}[HTML]{E7E7E7}{\parbox{\textwidth}{%
\noindent \textbf{The structure of the above *.cell file can be summarized as follows:}
\begin{maineu}
  \item The first 9 lines are data reading blocks defined by the format \%BLOCK [keywords], this format is very common in CASTEP. These blocks define the basic \textbf{structure data} of the crystal. 
  \item The [keywords] of the 1 to 5 rows of data is LATTICE\_CART, which declares the unit cell base vector defined by the Cartesian absolute coordinate system.
  \item The [keywords] used in lines 7 to 9 is POSITIONS\_FRAC. The meaning of this in CASTEP is ``the position of the atom defined in fractional coordinates''. In AIRSS, the data module can not only specify the initial position of the atom, but also Define the constraint conditions for a single atom in the search process. If the specific position of the atom is not known initially, it can be set to any value, such as (0, 0, 0), and the program will find the atomic position that meets the requirements. Atom position More specific details of the settings will be given later.
  \item \#MINSEP on line 11 is \textbf{global parameter} in AIRSS. \#MINSEP=\(1.5\) indicates that the distance between any two atoms must not be less than \(1.5\) \r(A).
\end{maineu}}}\\


As we can see, the structure of the *.cell file is roughly divided into two parts: \textbf{structure data} and \textbf{global parameters}.

\subsection{Parameter Details of *.cell File}
\subsubsection{structure data}
This part follows the data pattern defined in the CASTEP structure file. The structure data consists of two parts: the lattice parameter data block and the atomic position data block.


The specific mode of the data block is as follows:
\begin{lstlisting}[language={bash}]
%BLOCK [keywords]
[...]
[structure data]
[...]
%BLOCKEND [keywords]
\end{lstlisting}


The data block keywords that can be used in AIRSS are listed in \textbf{Table \ref{BLOCKkeywords}}.

\begin{center}
\begin{longtable}{m{13em}<{\centering} | m{19em}}
\caption{AIRSS Cheat Sheet -- Data BOLCK}
\label{BLOCKkeywords} \\
\toprule
\textbf{Parameters}  & \textbf{Description}  \\
\midrule
\midrule
\endfirsthead
\multicolumn{2}{c}{\tablename\ \thetable\ -- \textit{Continued from previous page}} \\
\toprule
\textbf{Parameters}  & \textbf{Description}  \\
\midrule
\midrule
\endhead
\midrule \multicolumn{2}{r}{\textit{Continued on next page...}} \\
\endfoot
\endlastfoot 
\verb|LATTICE_CART|  & Use the Cartesian coordinate system to define the base vector of \textbf{unit cell} with a matrix of \(3\times3\). By appending the following tags to the block: \verb|#FIX,| \verb|#CFIX,| \verb|#ABFIX|, can be implemented separately: fix the entire lattice shape, fix the lattice constant c, and fix the lattice constant ab. In addition, it should be emphasized that if you want to ensure that the lattice parameters are unchanged, except in the lattice Add \verb|#FIX| to the parameter data block to ensure that it is maintained as a constant value when guessing the lattice structure, and it is also necessary to make corresponding settings in the DFT relaxation software to ensure that it is also fixed during the structure relaxation. \textbf{It is worth noting that}, if the lattice shape can be changed randomly (that is, there is no lattice label \verb|#FIX|), then the volume corresponding to the unit cell base vector defined in the block \(V_{targ}\) \textbf{is not} the initial total volume of the original cell. The final total volume of the system is calculated as follows: \(V_{cell} = V_{targ} N_{symm} N_{all} / N_{ lines}\) or \(V_{cell} = V_{targ} N_{symm} N_{atom} \), where \(N_{all}\) is the unit cell after considering \verb|NUM=n| The total number of atoms, \(N_{lines}\) is the total number of rows of atoms defined in the block of \verb|BLOCK POSITIONS_*|, \(N_{symm}\) is the number of system symmetry operation group elements, \(N_{atom}\) is the number of atoms defined by \verb|#NATOM=|. \footnote{This design of the unit cell volume of the system is to facilitate the search for variable components or variable atoms.}\\
\midrule
\verb|LATTICE_ABC| & Define the lattice parameters of the unit cell with a matrix of \(2\times3\). The first row of the matrix is the parameter abc, and the second row is the three angles. In the same \verb|.cell|, and \verb |LATTICE_CART| Choose one of the two. By attaching the following tags to the block: \verb|#FIX,| \verb|#CFIX,| \verb|#ABFIX|, can be achieved separately: fix the entire lattice shape, Fixed lattice constant c, fixed lattice constant ab.\textbf{It is worth noting that}, if the lattice shape can be changed randomly (that is, there is no lattice label \verb|#FIX|), then the definition in this block The volume corresponding to the cell constant \(V_{targ}\) \textbf{is not} the initial total volume of the original cell. The final total volume of the system is calculated as follows: \(V_{cell} = V_{targ} N_{symm} N_{all} / N_{lines}\) or \(V_{cell} = V_{targ} N_{symm} N_{atom} \), where \(N_{all}\) is considered\verb|NUM= n|The total number of atoms in the unit cell after definition, \(N_{lines}\) is the total number of rows of atoms defined in the block of \verb|BLOCK POSITIONS_*|, \(N_{symm}\) is the system symmetry operation group The number of elements, \(N_{atom}\) is the number of atoms defined using \verb|#NATOM=|.\\
\midrule
\verb|POSITIONS_FRAC| & The atomic position is defined by the fractional coordinates in the lattice base vector coordinate system.\\
\midrule
\verb|POSITIONS_ABS| & Define the atomic position with absolute numerical coordinates in Cartesian coordinate system. Choose one from this or \verb|POSITIONS_FRAC|.\\
\midrule
\verb|SYMMETRY_OPS| & Define the symmetry operations that the generated unit cell must meet, a group of four, the first three lines define rotation operations, and the fourth line defines translation operations. For specific usage, please refer to \href{http://www.tcm.phy.cam.ac.uk/castep/documentation/WebHelp/content/modules/castep/keywords/k_symmetry_ops_castep.htm}{CASTEP:SYMMETRY OPS}.\\
\bottomrule
\end{longtable}
\end{center}

The following briefly introduces the detailed writing method of \textbf{lattice parameter} data block and \textbf{atomic position} data block.

\paragraph{Lattice parameter} First introduce the setting of lattice parameters, \\take \verb|LATTICE_CART| as an example.\\
\emph{Example 1.}
\begin{lstlisting}[language={bash},numbers=left]
%BLOCK LATTICE_CART
20 0 0
0 20 0
0 0 20
#FIX
%BLOCKEND LATTICE_CART
\end{lstlisting}

The above fields construct a cube of \(20\times20\times20\) (\r{A}\(^3\)) as the unit cell of the crystal. Here \verb|#FIX| is called \textbf{lattice tag}.

It states that the lattice constant cannot be changed during the search (generating the initial random structure). If you want to ensure that the lattice constant of the system remains unchanged during DFT relaxation, you need to set it in the input file of the corresponding calculation software .

\paragraph{Atomic position} Then introduce the setting method of atomic position, \\take \verb|POSITIONS_FRAC| as an example.\\
\emph{Example 2.}
\begin{lstlisting}[language={bash},numbers=left]
%BLOCK POSITIONS_FRAC
Al  0.0 0.0 0.0 # Al1 % NUM=2 
Mg  0.0 0.0 0.0 # Mg1 % NUM=4 
O   0.4 0.2 0.3 # O1  % NUM=1 POSAMP=0 FIX
O   0.1 0.1 0.1 # O2  % NUM=1 POSAMP=0 UNMOVE
H   0.3 0.3 0.6 # free_H 
H   0.0 0.0 0.0 # H-set % ANGAMP=0 POSAMP=0
H   0.0 0.0 0.0 # H-set % ANGAMP=0 POSAMP=0
%BLOCKEND POSITIONS_FRAC
\end{lstlisting}

As can be seen from this example, the basic format of atomic position structure data is:
\begin{lstlisting}[language={bash}]
[element] [x] [y] [z] # [atoms_set_name] % [tag1] [tag2] [tag3]
\end{lstlisting}

\noindent\fcolorbox{mygray}[HTML]{E7E7E7}{\parbox{\textwidth}{%
\noindent \textbf{The meaning of the elements inside each line is as follows: }
\begin{maineu}
  \item The first item is the element name. If \textbf{the element name is set to Z}, it means that the atom is a void. The void has the same volume and PUSH properties as a real atom, but it will not be output in the final result.
  \item The terms two, three, and four are the coordinates of the atomic position.
  \item The first item after the pound sign (\#) is the name of the atom set where the atom is located. The name of the atom set can be set to any character. \textbf{Atoms with the same atom set name form an atom set, and an atom set consists of one or more A basic structural unit composed of two atoms. The atoms in the same atomic set move the same randomly and are not affected by PUSH}. If there is no special requirement, in order to achieve the relative maximum degree of freedom, it is generally not recommended to put different atoms into the same atom concentrated.
  \item The content after the percent sign (\%) is \textbf{atomic tag}. The same line of atoms can specify multiple atom tags, separated by spaces, they jointly specify several constraints that the atom should satisfy condition.
\end{maineu}}}\\

\textbf{Table \ref{AIRSS_Atom_Tag}} is the specific description of all atom tags available in AIRSS.

\begin{center}
\begin{longtable}{m{10em}|m{4em}<{\centering}|m{3em}<{\centering}|m{15em}}
\caption{AIRSS Cheat Sheet -- Atom Tags (distance in \r{A})}
\label{AIRSS_Atom_Tag}\\
\toprule
\textbf{Parameters} & \textbf{Type} & \textbf{Defualt} & \textbf{Description}  \\
\midrule
\midrule
\endfirsthead
\multicolumn{4}{c}{\tablename\ \thetable\ -- \textit{Continued from previous page}} \\
\toprule
\textbf{Parameters} & \textbf{Type} & \textbf{Defualt} & \textbf{Description}  \\
\midrule
\midrule
\endhead
\midrule \multicolumn{4}{r}{\textit{Continued on next page...}} \\
\endfoot
\endlastfoot
\verb|NUM=|\(n\)\hspace{4em} \verb|NUM=|\(n_{min}-n_{max}\) & \verb|int| & 1 & Define the number of atoms actually represented by the row of atoms. The repeated atoms defined by \verb|NUM| will be individually assigned to different \textbf{atom sets}. \textbf{It is worth noting that}, if the lattice shape can be changed randomly (that is, there is no lattice label \verb|#FIX|), the volume \(V_{targ}\) defined by \verb|BLOCK LATTICE_*| \verb|#TARGVOL=|, or \verb|#VARVOL=| \textbf{is not} the initial total volume of the primitive cell. The final total volume algorithm of the system As follows: \(V_{cell} = V_{targ}(N_{all}/N_{lines})N_{symm}\), where \(N_{all}\) is considered \verb|NUM=n| definition After the total number of atoms in the unit cell, \(N_{lines}\) is the total number of rows of atoms defined in the \verb|BLOCK POSITIONS_*| block, \(N_{symm}\) is the number of system symmetry operation groups .\\
\midrule
\verb|POSAMP=|\(d\)& \verb|float| & -1.0 & Define the maximum distance that  the atom(s) can deviate from the initial position in the structure search process. If it is a negative value, there is no limit.\\
\midrule
\verb|MINAMP=|\(d\)& \verb|float| & 0.0 & Define the minimum distance that the atom(s) deviates from the initial position during the structure search process.\\
\midrule
\verb|XAMP=|\(d\)& \verb|float| & -1.0 & Define the maximum distance that the row of atoms can move in the X axis direction during the structure search. If it is a negative value, there is no limit. Setting this item will invalidate \verb|POSAMP| and \verb|MINAMP|.\\
\midrule
\verb|YAMP=|\(d\)& \verb|float| & -1.0 & Define the maximum distance that the row of atoms can move in the Y axis direction during the structure search. If it is a negative value, there is no limit. Setting this item will invalidate \verb|POSAMP| and \verb|MINAMP|.\\
\midrule
\verb|ZAMP=|\(d\)& \verb|float| & -1.0 & Define the maximum distance that the row of atoms can move in the Z axis direction during the structure search. If it is a negative value, there is no limit. Setting this item will invalidate \verb|POSAMP| and \verb|MINAMP|.\\
\midrule
\verb|ANGAMP=|\(\theta\)  & \verb|float| \([0,360]\) & -1.0 & The maximum value of the rotation angle of the atom around the center of \textbf{atom set} where it is located (independent of \verb|POSAMP|, separate functions). When there is a lattice label \verb|#FIX|, \verb|ANGAMP=0|, \verb|POSAMP=0| is shared with \verb|NOMOVE(\FIX)| to ensure that the atom does not move in the original position. If all atom sets in the cell file have only 1 atom, this parameter is invalid, \verb|ANGAMP| Forced to 0. If it is negative, there is no limit.\\
\midrule
\verb|RAD=|\(d\) & \verb|float| & 0.0 & Set the radius of the atom, used to judge the minimum distance between two atoms, MINSEP. Its priority is lower than directly setting the global parameter \verb|#MINSEP=|.\\
\midrule
\verb|FIX| & \verb|void| & off & This atom is not affected by PUSH when it generates a structure. Any movable atom close to this atom will be PUSH back with 2 times the PUSH step. At the same time, write instructions to the cell file to make it immobile when CASTEP relaxes. This command is only valid when the lattice is \verb|#FIX|. \verb|FIX| in the atom tag has the similar names with the \verb|#FIX|, \verb|#CFIX|, \verb|#ABFIX| in the lattice tag, but with different functions. \\
\midrule
\verb|NOMOVE| & \verb|void| & off & This atom is not affected by PUSH when it produces a structure. Any movable atom close to this atom will be PUSH back with 2 times the PUSH step. This instruction is only valid when the lattice is \verb|#FIX|.\\
\midrule
\verb|COORD=|\(n\),\hspace{5em} \verb|COORD=|\(n_{min}-n_{max}\) & \verb|int| & -1 & Constrain the coordination number (number of nearest neighbors) of atoms in the row. If it is negative, there is no limit.\\
\midrule
\verb|NN=|\(\pm{}elm\)  & \verb|string| & null & Specify the type of the nearest neighbor element of the atom, `\(+\)' means that the element must be adjacent to the element, and `\(-\)' means that the element cannot be adjacent to the element. Is read once). If it is empty, it means unlimited.\\
\midrule
\verb|OCC=|\(p\) & \verb|float| \([0,1]\) & 1.0 & The probability of the point occupying an atom. The sum of the probability of occupying the same element in different positions must be an integer greater than 0. Accept input in the form of fractions, such as \verb|OCC=1/3|. If the value is set to less than 0 The number of the atom, the OCC of the atom is forcibly set to 1, and other atom positions that may be derived from the symmetry of the atom are no longer output. If the atom also has the \verb|FIX| or \verb|NOMOVE| label, then \verb|OCC| is forcibly set to 1. If the atom OCC is greater than 1, set it to a space (the same effect as setting the element name to Z). When the system has symmetry, using a smaller OCC can force an atom Located at a point with higher symmetry. But a more natural usage is to use \verb|MULT| instead of \verb|OCC| settings. If the global parameter \verb|#NFORM=n|(n is greater than 0) is set: In the absence of symmetry, the \verb|OCC| parameter is invalid; in the case of symmetry, please refer to the description in \verb|#NFROM=|. \\
\midrule
\verb|MULT=|\(m\) & \verb|float| & symm num & Set the multiplicity of the atomic point.\footnote{When this value is positive, the program will force the value of the OCC parameter to be overwritten to MULT/SYMM\_NUM, where SYMM\_NUM is the number of lattice symmetry groups. That is In AIRSS, multiplicities are achieved by setting the score OCC, so the same effect can be achieved by directly setting the score OCC without setting the MULT.} The multiplicity of the grid tells us that if we place an atom at this position, it is symmetric How many atoms will be generated by the nature. Using this parameter, you can limit the number of atoms actually generated by the crystal symmetry of a row of atoms, that is, control the symmetry of the position of the generated atoms. The default size of this parameter is the number of group operations, also That is, only the general position is searched by default. If the atom in the line has the label \verb|FIX| or \verb|NOMOVE|, the MULT is invalid, and \verb|OCC| is forced to -1. In addition to \verb|MULT|, You can also use the global parameter \verb|#NFORM=| to control the number of atoms generated by symmetry in the system. For details, please refer to the description of \verb|#NFROM=|. For more information about lattice multiplicities and symmetry, please refer to \href{http://folk.ntnu.no/yingday/NilsYD/PhaseStructure/001Space_Groups.pdf}{PDF: Space Group and Multiplicities}.\\
\midrule
\verb|PERM| & \verb|void| & off & After completing the selection of atomic positions, rearrange (exchange with each other with a certain probability) the types of elements between the specified atomic positions. It needs to be used with the global parameter \verb|#PERMUTE|, otherwise the parameter will be turned off.\\
\midrule
\verb|ADATOM| & \verb|void| & off & Indicates that the atom in the row is equal, and the atom that is added after the generation of all atom positions without this label.\\
\midrule
\verb|ATHOLE| & \verb|void| & off & Indicates that the atom is located in the hole that was dug out, and the atom will be automatically deleted from the output structure. It is often used in conjunction with the global variables \verb|#HOLE=|, \verb|#HOLEPOS=|.\\
\bottomrule
\end{longtable}
\end{center}

\subsubsection{Global parameters}

The conditions that the entire system should comply with in the structure search process are specified by global parameters. The global parameters in AIRSS all start with a pound sign (\verb|#|), which affect the lattice and all atoms in the system. In addition, some global parameters and Atomic tags have the same effect.At this time, the priority of atomic tags setting is higher than the global parameters.\\

The functions and detailed usage methods of all global parameters available in AIRSS are show in \textbf{Table \ref{AIRSS_Cheat_Sheet_Pragma}}.

\begin{center}
\begin{longtable}{m{11em}|m{4em}<{\centering}|m{3em}<{\centering}|m{15em}}
\caption{AIRSS Cheat Sheet -- Global Pragma (distance in \r{A})}
\label{AIRSS_Cheat_Sheet_Pragma} \\ 
\toprule
\textbf{Parameters} & \textbf{Type} & \textbf{Defualt} & \textbf{Description}  \\
\midrule
\midrule
\endfirsthead
\multicolumn{4}{c}{\tablename\ \thetable\ -- \textit{Continued from previous page}} \\
\toprule
\textbf{Parameters} & \textbf{Type} & \textbf{Defualt} & \textbf{Description}  \\
\midrule
\midrule
\endhead
\midrule \multicolumn{4}{r}{\textit{Continued on next page...}} \\
\endfoot
\endlastfoot
\verb|#CELLCON=|\(a\;b\;c\;\alpha\;\beta\;\gamma\) & \verb|int| & off & define the conditions that the unit cell should meet: \(a ,b,c\) are the lattice constant; \(\alpha,\beta,\gamma\) are the three crystal angles. The optional values for the lattice constant are \(\{0,-1\}\) , The optional values for crystal angle are \(\{0,-1, \theta\}\). \(0\) means no constraint, \(-1\) means equal. For example, \verb|#CELLCON= -1-1 -1 90 90 90| means cubic crystal system.\\
\midrule
\verb|#SYSTEM=|\(sys\) & \verb|string| & off & Set the crystal system where the structure is located. The optional inputs are [Tric, Mono, Hexa, Rhom(/Trig), Orth, Tetr, Cubi]. This parameter is actually a number of special combinations of \verb|'#CELLCON='| parameters.\\
\midrule
\verb|#CONS=|\(p\) & \verb|float| \((0,1]\) & 0.4 & Constrain the side length of the unit cell. Close to 0 means no constraint at all, and equal to 1 means do everything possible to constrain the unit cell abc to have the same length on the three sides.\\
\midrule
\verb|#ACONS=|\(p\)& \verb|float| \((0,1]\) & 0.5 & Constrain the crystal angle of the unit cell to keep it away from a situation where the lattice parameter is extremely small and the unit cell is flat. Close to 0 means no restriction at all, and equal to 1 means doing everything possible to constrain the three bond angles to be strictly equal to 90 degrees.\\
\midrule
\verb|#CELLAMP=|\(p\)& \verb|float| & -1.0 & Within a certain limit, the lattice shape is changed randomly. When set to a negative value, the lattice shape will change completely randomly. The smaller the \(p\), the smaller the deviation of the lattice from the given value in the cell file. To enable this parameter , It is recommended not to set a value exceeding 1.0.\footnote{For details on how to use this parameter, please refer to the usage of cellamp variable on line 100 of airss-0.9.1/src/buildcell/src/build.f90.} After using this parameter, the grid label \verb|#ABFIX| and \verb|#CFIX|, atomic tags \verb|#CONS| and \verb|#ACONS| will all be deprecated. If it is a negative number, turn off this parameter setting.\\
\midrule
\verb|#VACUUM=|\(d\) & \verb|float| & 0.0 & Add a vacuum layer of \(d\)\r(A) in the lattice (Z direction).\\
\midrule
\verb|#NFORM=|\(n\) & \verb|int| & -1 & Declare that the number of atoms actually present in the unit cell (even after considering the symmetry) is \verb|%BLOCK POSITIONS_*| or \verb|#SPECIES| defined in \(n\) times. If it is a negative value This parameter is turned off. Similar to the atom label \verb|MULT|, use this parameter to constrain the number of copies of atoms defined in the unit cell due to symmetry, but when there are atoms with repeated elements in the unit cell, The effect of \verb|#NFORM=| will be different from \verb|MULT|. For example, two Si atoms are defined in a unit cell with several symmetry operations. Set their \verb|MULT| to 2, and the system 4 atoms will be produced, and every 2 atoms individually satisfy symmetry. If the value \verb|#NFROM=2| is set, the system will also produce 4 atoms, but the combination of 4 atoms will satisfy symmetry. The appearance of the parameter will override the setting of the atom label \verb|MULT|. At the same time, using this parameter will also calculate the total volume of the system \footnote{please refer to the description of BLOCK LATTICE\_*.}\(N_{symm} \) is replaced with \(N_{fu}\). That is, \(V_{cell} = V_{targ} N_{fu} N_{all} / N_{lines}\) or \(V_{cell} = V_{targ} N_{fu} N_{atom} \), where \(V_{targ}\) is the initial volume defined by \verb|BLOCK LATTICE_*| or \verb|TARGVOl, VARVOL|, \(N_{all}\) is the total number of atoms in the unit cell after considering the definition of \verb|NUM=n|, \(N_{lines}\) is the total number of lines of atoms defined in the block of \verb|BLOCK POSITIONS_*|, \(N_{fu}\) is the integer followed by \verb|#NFORM=|, \(N_{atom}\) is the number of atoms defined by \verb|#NATOM=|. \footnote{Use the atom label MULT or OCC There is no such effect when symmetry is restricted.} At the same time, when there is no symmetry, \verb|#NFORM=| cannot (and is not necessary) combined with \verb|#NATOM=|.\\
\midrule
\verb|#SUPERCELL=|\(n\) \verb|#SUPERCELL=|\(n_a\;n_b\;n_c\;\;\;\;\;\;\) \hspace{2em}\verb|#SUPERCELL=|\(a_x\; a_y\;a_z\;\)\hspace{2em} \(b_x\;b_y\;b_z\;c_x\;c_y\;c_z\) & \verb|int| & off & Define the size of the super cell. You can use the number of unit cells in the super cell \(n\), the value of the base vector of the super cell lattice in three directions\(n_a\;n_b\;n_c\), or the super cell The transformation matrix between the base vector of the cell and the unit cell \([[a_x,a_y,a_z],[b_x,b_y,b_z],[c_x,c_y,c_z]]\) defines a new super cell. Super cell The construction strategy is: first use the unit cell to construct the qualified atomic configuration, and then copy and paste the super cell according to the expansion cell parameters and directly output it.\\
\midrule
\verb|#SLAB| & \verb|void| & off & Declare that the structure is a two-dimensional planar structure. When taking the super cell, the cell will no longer expand in the c direction, and the c direction will be ignored when checking the symmetry of the structure.\\
\midrule
\verb|#SURFACE| & \verb|void| & off & Declare that the structure is a surface structure, the surface structure inherits all the characteristics of SLAB, and at the same time adds a symmetry restriction condition related to the surface. \footnote{See source code airss-0.9.1/src/buildcell/src/cell.90 row 3216.}\\
\midrule
\verb|#MOLECULES|& \verb|void| & off & Stated that the atoms in the same atomic set constitute a basic molecular configuration, and the atoms in the same atomic set will no longer be checked when checking the coordination..\\
\midrule
\verb|#CLUSTER| & \verb|void| & off & Stated that the predicted structure is acyclic cluster.\\
\midrule
\verb|#FOCUS=|\(n\) & \verb|int| & 0 & The final structure of the constraint must be \(n\) components (consisting of \(n\) different elements). This parameter is generally used for variable component analysis. Less than or equal to 0 means no constraint.\\
\midrule
\verb|#OCTET|& \verb|void| & off & Check whether the chemical ratio is electronically balanced (whether all electrons are divisible by 8).\\
\midrule
\verb|#POSAMP=|\(d\) & \verb|float|  & -1.0 & Same as the definition in the atom tag, the maximum position of the atom from the initial point in the structure search. Negative values are unlimited.\\
\midrule
\verb|#MINAMP=|\(d\) & \verb|float| & -1.0 & Same as the definition in the atom tag, the minimum position of the atom from the initial point in the structure search. Negative values are unlimited.\\
\midrule
\verb|#XAMP=|\(d\) & \verb|float| & -1.0 & The same as the definition in the atom tag, the maximum amplitude of the atom X-direction deviation from the initial point in the structure search. Negative value is unlimited. Setting this option will invalidate POSAMP and MINAMP. \\
\midrule
\verb|#YAMP=|\(d\) & \verb|float| & -1.0 & Same as the definition in the atom tag, the maximum amplitude of the atom Y-direction deviating from the initial point in the structure search. Negative value is unlimited. Setting this item will invalidate POSAMP and MINAMP.\\
\midrule
\verb|#ZAMP=|\(d\) & \verb|float| & -1.0 & Same as the definition in the atom tag, the maximum amplitude of the atom Z-direction deviating from the initial point in the structure search. Negative value is unlimited. Setting this item will invalidate POSAMP and MINAMP.\\
\midrule
\verb|#ANGAMP=|\(\theta\)& \verb|float| \([0,360]\) & -1.0 & Same as the definition in the atom tag, the maximum value of the rotation angle of the atom around the center of \textbf{atom set} where it is located. Negative values are unlimited.\\
\midrule
\verb|#MINBANGLE=|\(\theta\) & \verb|float| \((0,360]\) & 0.0 & Set the minimum value of the atom bond angle in the search structure.\\
\midrule
\verb|#MAXBANGLE=|\(\theta\) & \verb|float| \((0,360]\) & 180.0 & Set the maximum value of the atom bond angle in the search structure.\\
\midrule
\verb|#MINSEP=|\(d\) \verb|#MINSEP=|\(d\;\)\verb|X-X=|\(d_{X-X}\;\)\ \ \  \ \verb|X-Y=|\(d_{X-Y}\;...\) & \verb|float| & 0.0 & The minimum distance between two atoms can also be used to define the fixed distance between two atoms. For example, \verb|#MINSEP=| \verb|2.0 Li-Li=2.6 Ge-Ge=2.51|\\
\midrule
\verb|#RAD=|\(d\)& \verb|float|  & 0.0 & Same as the definition in the atom label, define the radius of the atom.\\
\midrule
\verb|#COORD=|\(n\)& \verb|int| & -1 & Same as the definition in the atom label, set the coordination number limit of the atom. Negative value has no limit.\\
\midrule
\verb|#SPIN=|\(S_{real}\;S_{mod}\;\;\;\;\;\;\) \verb|#SPIN=|\(S_{real}\;S_{mod}\;\;\;\;\;\) \verb|"|elm\(_1\) elm\(_2\)... \verb|"| & \verb|float|,  \verb|string|& off & Randomly set the value of the collinear spin on each atom of the system. And require \(S_{t,real}\)/\(N_{ions}\) = \(S_{real}\), \(S_{ t,mod}\)/\(N_{ions}\) = \(S_{mod}\), where \(S_{t,real}\) is the sum of the spins of all specified atoms, \(S_(t ,mod)\) is the sum of the absolute values of the spins of all specified atoms. The spins of unspecified atoms remain at 0. The element symbols with spaces enclosed in double quotes can be used to indicate which are specified atoms. If no atom is specified , All atoms are specified by default. For example, \verb|#SPIN=0 5 "Fe Co "| or \verb|#SPIN=1 4|. \\
\midrule
\verb|#SPECIES=|\(elm_1\%tags_1,\) \(elm_2\%tags_2,...\;\;\;\;\;\;\) \verb|#SPECIES=|\(elm_1,elm_2...\) & \verb|string|  & off & Use simplified notation to define the atomic components of the system. For example, \verb|#SPECIES=Si| \verb|%NUM=1| \verb|COORD=2,|\verb|O%NUM=2|. This parameter cannot be combined with \verb|BLOCK POSITIIONS_*| appears at the same time.\\
\midrule
\verb|#NATOM=|\(n\) \hspace{6em}\verb|#NATOM=|\(n_{min}-n_{max}\)  & 0 & \verb|int| & Used in conjunction with \verb|#SPECIES| to define the total number of atoms in a unit cell, which is generally used for variable component analysis (metamorphic prediction). And using this global parameter will make \verb|#SPECIES| included in the command All atomic tags after \verb|%| will be ignored. \footnote{For detailed reasons, please refer to the difference between line 493 and line 514 of the source code ``airss-0.9.1/src/buildcell/src/cell.f90''.} If there are various elements in \verb|#SPECIES|, the random number of each element will be picked, and the total is kept as NATOM. This parameter is automatically invalid when set to 0. \textbf{It is worth noting that}, if the lattice shape can be changed randomly (that is, there is no Lattice label \verb|#FIX|), the volume \(V_{targ}\) defined by \verb|BLOCK LATTICE_*| \verb|#TARGVOL=|, or \verb|#VARVOL=| \textbf{is not}  the initial total volume of the primitive cell. The final total volume of the system is calculated as follows: \(V_{cell} = V_{targ} N_ {symm} N_{atom} \), where \(N_{symm}\) is the number of symmetric operation groups of the system, \(N_{atom}\) is the number of atoms defined using \verb|#NATOM=|.\\
\midrule
\verb|#TARGVOL=|\(V\) \verb|#TARGVOL=|\(V_{min}-V_{max}\) & \verb|float| & init. cell vol. & The fixed lattice volume is \(V\), or a random value between \(V_{min}\) and \(V_{max}\), the volume will no longer change randomly in the structure search. The default is the initial setting The volume of the primitive cell. This parameter is often used when the \verb|BLOCK POSITION_*| block is not introduced. \textbf{Special attention is needed}, the volume defined here\(V_{targ}\)\textbf{is not }The initial total volume of the primitive cell. The final total volume of the system is calculated as follows: \(V_{cell} = V_{targ} N_{symm} N_{all} / N_{lines}\) or \(V_{cell} = V_{targ} N_{symm} N_{atom} \), where \(N_{all}\) is the total number of atoms in the unit cell after the definition of \verb|NUM=n|, \(N_{lines}\) It is the total number of rows of atoms defined in the \verb|BLOCK POSITIONS_*| block, \(N_{symm}\) is the number of system symmetry operation group elements, \(N_{atom}\) is the number of atoms defined by \verb|#NATOM =|.\\
\midrule
\verb|#VARVOL=|\(V\)& \verb|float| & init. cell vol. & Given the initial lattice volume, the actual lattice volume will be randomly selected between 0.95-1.05 times the given volume. \textbf{Special attention is needed}, then the volume defined here\(V_{targ}\)\textbf{not} the initial total volume of the primitive cell. The final total volume of the system is calculated as follows: \(V_{cell} = V_{targ} N_{symm} N_{all} / N_{lines}\) or \( V_{cell} = V_{targ} N_{symm} N_{atom} \), where \(N_{all}\) is the total number of atoms in the unit cell after the definition of \verb|NUM=n|, \(N_{lines}\) is the total number of lines of atoms defined in the \verb|BLOCK POSITIONS_*| block, \(N_{symm}\) is the number of system symmetry operation groups, \(N_{atom}\) is the number of atoms defined by \verb|#NATOM=|.\\
\midrule
\verb|#SLACK=|\(p\)& \verb|float| \([0,1)\) & 0.0 & Using this parameter can reduce the system's restrictions on the bonding between atoms (the relative position of atoms) as a whole, the larger the \(p\), the lower the requirements for the distance and angle between atoms. The default is 0, and the recommended value is 0.1--0.3.\\
\midrule
\verb|#AUTOSLACK=|\(p\)& \verb|float| \([0,1)\) & off & Using this parameter can reduce the system's restrictions on the bonding between atoms (the relative position of atoms) as a whole. The larger the \(p\), the lower the requirements for the distance and angle between atoms. If the given initial value \(p\) is not appropriate, the SLACK is incremented in steps of 0.01 until the appropriate SLACK value is found.\\
\midrule
\verb|#FLIP|& \verb|void| & off & When searching for the structure, a random flip operation is introduced to \textbf{atomic set}. If there is only one atom in all atom sets in the system, this parameter is invalid.\\
\midrule
\verb|#REMOVE|& \verb|void| & off & (After PUSH,) Delete (one of) the overlapping atom. Can be used for structure prediction with high initial atom density.\\
\midrule
\verb|#TIGHT|& \verb|void| & off & Make the generated structure more compact.\\
\midrule
\verb|#SYMMOPS=|\(n\)\hspace{6em}\verb|#SYMMOPS=~|\(n\;\;\;\;\;\;\;\;\;\;\;\)\hspace{6em}\verb|#SYMMOPS=|\(n_{min}-n_{max}\) & \verb|int| &  off & Declare that the generated structure must contain \(n\) kinds of symmetry operations. If the system is a periodic crystal structure, it is recommended to select from the following integers: 1,2,3,4,5,6,8,12,16,24,48. If the input contains a tilde sign (\(\sim\)), it means that atoms will be only placed on general positions during structure search. The high symmetry special positions will not be considered. If you use \verb|MULT| to specify multiplicity by atom, the tilde (\(\sim\)) is ignored, but if \verb|#NFORM=n|(\(n\) is greater than 0) is used, it will conflict with the tilde (\(\sim\)). Therefore, the tilde (\(\sim\)) cannot be used with the \verb|MULT| or \verb|#NFORM=|. \textbf{It needs to be point out that,} the method that AIRSS used to lock symmetry is, copy atoms according to symmetry. For example, if the atom has \(C_4\) symmetry, the total number of atoms in the final output will be 4 times of what the user set in *.cell file. By using the atom label \verb|OCC, MULT , #NFORM=|, etc., one can achieve operations that place atoms at a higher symmetry points.\\
\midrule
\verb|#SYMM=|\(spg\)\hspace{6em} \verb|#SYMM=~|\(spg\)& \verb|string| & off & The generated structure must be in the \(spg\) space group, \(spg\) is the name of the space group. If the input contains a tilde (\(\sim\)), it means that the structure search will only consider the general positions. In this mode, do not use \verb|MULT| or \verb|NFORM| to limit the number of symmetric copies of atoms.\\
\midrule
\verb|#SYMMNO=|\(n\)\hspace{6em} \verb|#SYMMNO=~|\(n\) & \verb|int| & off & The generated structure must be in the space group No. \(n\), \(n\) is the number of the space group. If the input contains a tilde (\(\sim\)), it means that the structure search will only consider the general positions. In this mode, do not use \verb|MULT| or \verb|NFORM| to limit the number of symmetric copies of atoms.\\
\midrule
\verb|#SYMMORPHIC| & \verb|void| & off & Only check the point symmetry operation.\\
\midrule
\verb|#SGRANK=|\(n\) & \verb|int| & 230 & Set the upper limit of the sequence number for space group \(n\). When this value is set to 230, symmetry locking of any space group is accepted.\\
\midrule
\verb|#ADJGEN=|\(n\)\hspace{4em}\verb|#ADJGEN=|\(n_{min}-n_{max}\)  & \verb|int|  & 0 & Adjust the number of general positions (GP) used in the unit cell. When this value is 0, the GP points will be used to the greatest extent. Increasing the value will gradually use more Special positions (SP) points. If you try After finding that it is difficult to generate a qualified structure, the program will dynamically increase this value. For the relationship between SP/GP and crystal space group, please refer to: \href{https://en.wikipedia.org/wiki/Wyckoff_positions}{Wiki: Wyckoff Position}.\\
\midrule
\verb|#BREAKAMP=|\(d\) & \verb|float| & 0.0 & Moving atoms randomly in the direction of the lattice vector a destroys the original symmetry, and the moving distance of the atomic fractional coordinates is calculated with: \(d^{(frac)}_a=(random(0,1)\times{}d)^{1/3}\)\\
\midrule
\verb|#NOPUSH|& \verb|void| & off & For atoms that are too close, do not introduce a PUSH step, directly reject the configuration. This keyword will not close the PUSH step of the crystal center potential field introduced by keywords such as \verb|#SPHERE|.\\
\midrule
\verb|#PUSHSTEP=|\(p\)& \verb|float| & 0.25 & The scale parameter of each step of PUSH moving distance (stepsize).\\
\midrule
\verb|#PUSHMAX=|\(n\)& \verb|int| & 100 & Set the maximum number of PUSH steps.\footnote{Please pay attention to distinguish the two concepts of `PUSH steps' and `single-step PUSH times'. The former is the total number of cycles executed by the system PUSH action (PUSH function), and the latter represents The number of times the atom is pushed in the system in each PUSH action (inside the PUSH function).} There are six types of output in \verb|buildcell|: \verb!~, X, -, :, |, *!. Tilde (\verb|~|) represents the success of the structure generation; the cross (\verb|X|) represents the generation failure. The cause of the failure may be the failure of the structure generation, or the failure of the PUSH step, and the criterion for the PUSH failure is after the PUSH step of the PUSHMAX step, whether the system meets the requirements; the four characters of short line, colon, vertical line, and asterisk (\verb!-, :, |, *!) reflect the total number of times all atoms in the system are PUSH in a single PUSH step, from left to right means it has been pushed 0-9, 10-99, 100-999, 1000+ times. When the current PUSH step refreshes the record of the number of PUSHs in the previous single-step PUSH, the corresponding symbol will be output.\\
\midrule
\verb|#OVERLAP=|\(cov\)& \verb|float| & off & After PUSH is over, TPSD\footnote{Two-point Step Size Gradient Methods-Barzilai and Borwein, IMA Journal of Numerical Analysis, 8, 141 (1988)} is additionally used to perform simple relaxation of the potential pair crystal structure. \(cov \) is the convergence criterion. The smaller the value, the higher the limit on the lattice convergence. The recommended value is 0.1--0.2.\\
\midrule
\verb|#RASH|& \verb|float| & off & After using TPSD to relax the potential, introduce random displacement and rotation between the atom sets (SHAKE step). This parameter is only effective after setting \verb|#OVERLAP|.\\
\midrule
\verb|#RASH_POSAMP=|\(d\)& \verb|float| & 1.0 & Set the maximum distance of the SHAKE step introduced by RASH to move the atomic set, similar to POSAMP. This item must be a small positive value, \textbf{cannot be set to a negative number}.\\
\midrule
\verb|#RASH_ANGAMP=|\(\theta\) & \verb|float| \((0,360]\) & 30.0 & Set the maximum angle of rotation of the SHAKE step atom set introduced by RASH around its midpoint, similar to ANGAMP. This item must be a small positive value, \textbf{cannot be set to a negative number}.\\
\midrule
\verb|#CELLADAPT|& \verb|void| & off & In the case of setting \verb|#OVERLAP|, you can set this additionally to force the relaxation of the simple structure of TPSD and try to change the shape of the unit cell while keeping the volume unchanged. By default, the system will not optimize the TPSD structure. Change the shape of the unit cell. If there is a lattice mark \verb|#FIX| or \verb|#CELLAMP=0| is set, this parameter is invalid. \\
\midrule
\verb|#THREE=|\(p\)& \verb|float| & TODO & Use three-body potential energy instead of TPSD relaxation structure, \textbf{The function corresponding to this parameter has not been implemented in airss-0.9.1}.\\
\midrule
\verb|#COMPACT|& \verb|void| & on & Perform a niggli reduce operation on the final unit cell. When the lattice shape is not locked (the lattice label \verb|#FIX, #CFIX, #ABFIX| is not introduced), this item is turned on by default. \href{http://atztogo.github.io/niggli/#algorithm}{R. W. Grosse-Kunstleve, N. K. Sauter and P. D. Adams, Acta Cryst., A60, 1-6 (2004)} \\
\midrule
\verb|#NOCOMPACT| & \verb|void| & off & Forcely close COMPACT operation.\\
\midrule
\verb|#PERMUTE| & \verb|void| & off & After completing the selection of the atomic positions, rearrange (exchange with each other with a certain probability) the types of elements between the specified atomic positions. You can use it in conjunction with the atomic label \verb|PERM|.\\
\midrule
\verb|#PERMFRAC=|\(p\) & \verb|float| \([0,1]\)  & 1.0 & Set the probability of rearrangement.\\
\midrule
\verb|#HOLE=|\(d\) & \verb|float| & -1.0 & Set the radius of the hole to be cut on the lattice. When set to a negative number, no processing will be done on the formed structure.\\
\midrule
\verb|#HOLEPOS=|\(f_a\;f_b\;f_c\) & \verb|float| & random & Set the position (fractional coordinates) of the cut hole on the lattice. The default is a random position. Can be used with \verb|ATHOLE| in the atomic tag.\\
\midrule
\verb|#VACANCIES=|\(n\)\verb|@|\(elm\)& \verb|float|, \verb|string| & off & After waiting for the structure to be generated, select \(n\) atoms whose element type is elm and replace them with vacancies. \footnote{This parameter originally designed an input without the @ symbol, but it is currently in airss-0.9.1 , This input has some bugs in the subsequent processing, so it is not explained here.}\\
\midrule
\verb|#MAXTIME=|\(t\)& \verb|float| & 1.0 & Set the upper limit of the time used for the PUSH step of a guess structure, after which the program will stop PUSH and re-guess the new structure. Default \(t=1\) second.\\
\midrule
\verb|#NFAILS=|\(n\)& \verb|int| & 0 & The number of failures allowed for each structure (the number of occurrences of \verb|X| in the output of the \verb|buildcell| command). If its value is 0, there is no limit.\\
\midrule
\verb|#SPHERE=|\(r\) & \verb|float| & off & Introduce a spherical potential energy at the center of the unit cell. Set the radius of attraction of the spherical potential energy to \(r\). When the distance between the atom and the center of the lattice is greater than \(r\), it will be PUSH directed to the center of the lattice.\\
\midrule
\verb|#ELLIPSOID=|\(r\;\varepsilon\) & \verb|float|  & off & An ellipsoidal attractive potential is introduced at the center of the unit cell. \(r\) is the length of the semi-major axis of the ellipsoid potential energy, and \(\varepsilon\) is the degree of deformation. When the distance between the atom and the center of the lattice is greater than \(r\) , Will be subjected to PUSH pointing to the center of the lattice. \(\varepsilon=0\) is spherical, the larger the \(\varepsilon\), the more serious the distortion. \\
\midrule
\verb|#PANCAKE=|\(r\;\varepsilon\) & \verb|float|  & off & Introduce a pie-shaped attraction potential at the center of the unit cell. \(r\) is the radius of the disc, \(\varepsilon\) is the degree of deformation. When the distance between the atom and the center of the lattice is greater than \(r\), it will be affected PUSH pointing to the center of the lattice. \(\varepsilon=0\) is a flat round pie, \(\varepsilon=1\) is the potential energy close to the sphere. \\
\midrule
\verb|#CIGAR=|\(r\;\varepsilon\) & \verb|float| & off & A cigar-like attractive potential is introduced at the center of the unit cell. \(r\) is the length of the cigar, \(\varepsilon\) is the degree of deformation. When the distance between the atom and the center of the lattice is greater than \(r\), it will be directed to the crystal The PUSH in the center of the lattice. \(\varepsilon=0\) is the tip-like potential energy, and \(\varepsilon=1\) is the potential energy close to the spherical shape.\\
\midrule
\verb|#CYLINDER=|\(r\) & \verb|float| & off & Introduce a cylindrical potential energy at the center of the unit cell (the atom is not subject to force in the Z direction). \(r\) is the radius of attraction of the cylindrical potential energy. When the distance between the atom and the center of the lattice is greater than \(r\), it will receive PUSH in the XY direction pointing to the center of the lattice.\\
\midrule
\verb|#CORE=|\(r\) & \verb|float| & off & Attach a repulsive core to the defined spherical (ellipsoid, round pie, cigar, cylindrical) attraction potential. Set the repulsive core radius (major axis length, radius, cigar length, cylinder radius) to \(r\). When the distance between the atom and the center of the lattice is less than \(r\), it will be PUSH away from the center of the lattice.\\
\midrule
\verb|#WIDTH=|\(l\)& \verb|float| & off & Use planar potential energy (atoms are not subject to force in the X and Y directions), and additionally calculate the distance of the PUSH step. \(l\) is the length of the planar potential energy attraction. When the distance between the atom and the origin is greater than \(l\) When, it will be PUSH in the Z direction pointing to the origin.\\
\midrule
\verb|#SHIFT=|\(h\)& \verb|float|& 0.0  & Move the plane potential to the position of Z=\(h\) (the position of origin), by default \(h=0\).\\
\bottomrule
\end{longtable}
\end{center}

\newpage
Now you should be able to easily understand the following:

\begin{lstlisting}[language={bash},numbers=left]
%BLOCK LATTICE_CART
20 0 0
0 20 0
0 0 20
#FIX
%ENDBLOCK LATTICE_CART

%BLOCK POSITIONS_FRAC
Al 0.0 0.0 0.0 # Al1 % NUM=7-13 COORD=4
%ENDBLOCK POSITIONS_FRAC

#MINSEP=1.5
#CLUSTER
#OVERLAP=0.2
#RASH
#POSAMP=3.0
#MINBANGLE=80
#MAXBANGLE=120
\end{lstlisting}

In addition, the data block corresponding to the structure data may not appear in the *.cell file at all. For example, you only have some vague understanding of the approximate structure of the crystal (for example, you only know the atomic composition of the crystal, the approximate volume of the crystal lattice, etc. ), you can still use AIRSS for structure search. Here are two AIRSS structure seed files that conform to the specification and are very concise.\\
\emph{Eg. 4.1}
\begin{lstlisting}[language={bash},numbers=left]
#VARVOL=15
#SPECIES=A%NUM=4,B%NUM=1
#NFORM=2 
#MINSEP=1.5
\end{lstlisting}
\emph{Eg. 4.2}
\begin{lstlisting}[language={bash},numbers=left]
#VARVOL=15 
#SPECIES=A,B,C
#NATOM=2-8
#MINSEP=1.5        
\end{lstlisting}

Here, \verb|#VARVOL| is used to replace the lattice parameter data block \verb|BLOCK LATTICE_CART|, and \verb|#SPECIES| is used to replace the atomic position data block \verb|BLOCK POSITIONS_FRAC|.

\newpage
\section{Structural relaxation and energy calculation}

\subsection{Relax with airss-pp3 module}
When using AIRSS combined with \verb|airss-pp3| to calculate the prediction structure of the module, in addition to preparing a *.cell file, you also need to prepare a file named *.pp.

\verb|airss-pp3| is the pp3 pair potential calculation module that comes with AIRSS. Its function is to use the classical molecular potential field (such as 6-12 potential) to relax the atomic structure and output the energy of the system. This module uses the crystal energy model of the dimensional image and does not involve any first-principle complex calculations, so its implementation is simple, the effect is stable, and the calculation speed is extremely fast. It is suitable for small systems with simple components. More specifically, \verb|airss-pp3| uses the following potential energy to calculate the force on the atom and the total energy of the system:
\begin{subequations}
  \label{eq:pp3}
  \begin{align}
    E_{ij} &= 4\varepsilon_{ij}\left[\left(\dfrac{\sigma_{ij}}{r_{ij}}\right)^m -\beta_{ij}\left(\dfrac{\sigma_{ij}}{r_{ij}}\right)^n\right]\\
    E &= \sum_{i<j}^{\text{all ions}} E_{ij}
  \end{align}
\end{subequations}
Where, \(i,j\) calibrates different atomic positions. When the types of elements are different, variables such as \(\varepsilon_{ij},\sigma_{ij}\) correspond to different values.

When using this module, you need to configure a parameter file named *.pp first. This file stores the relevant parameters of the potential, and its internal writing form is as follows:
\begin{lstlisting}[language={bash},numbers=left]
n_spec m n range
specs
# Epsilon
eps_11 eps_12 ...
eps_22 ...
...
# Sigma
sgm_11 sgm_11 ... 
sgm_11 ... 
...
# Beta
beta_11 beta_12 ...
beta_22 ...
...
\end{lstlisting}

\noindent\fcolorbox{mygray}[HTML]{E7E7E7}{\parbox{\textwidth}{%
\noindent \textbf{Among the above parameters,}
\begin{maineu}
  \item The items in the first line are: the number of elements; the value of the exponent \(m,n\) in the potential; the distance from the center of the atom at the minimum energy value (where the force is 0) in the potential \(d_{min}\) and the ratio of \(\sigma\), that is, \(d_{min}^{(ij)} = \sigma_{ij}*d_{range}\).
  \item The second line specifies the types of elements in the system, and different elements are separated by spaces.
  \item Line 3 is a comment line, meaningless in the program, but must exist.
  \item Lines 4 to (\(n_{spec}+3\)) declare the matrix corresponding to the \(\varepsilon\) value between the elements.
  \item The line (\(n_{spec}+4\)) is a comment line, meaningless in the program, but must exist.
  \item Lines (\(n_{spec}+5\)) to (\(2n_{spec}+4\)) declare the matrix corresponding to the value of \(\sigma\) between the elements.
  \item The line (\(2n_{spec}+5\)) must be a comment containing the character "Beta". If this character does not appear, the system will force all \(\beta\) values to 1.
  \item Lines (\(2n_{spec}+6\)) to (\(3n_{spec}+5\)) declare the matrix corresponding to the \(\beta\) value between the elements.
\end{maineu}}}\\

Eg.,
\begin{lstlisting}[language={bash},numbers=left]
2 12 6 5
A B
# Epsilon
1.00 1.50
0.50
# Sigma
2.00 1.60
1.76
\end{lstlisting}

Let's use an example to demonstrate the calculation process of AIRSS combined with \verb|pp3|.
\begin{lstlisting}[language={bash}]
user@machine_name$ ls 
Al.cell Al.pp
user@machine_name$ cat Al.cell
%BLOCK LATTICE_CART
2 0 0
0 2 0
0 0 2 
%ENDBLOCK LATTICE_CART
 
%BLOCK POSITIONS_FRAC
Al 0.0 0.0 0.0 # Al1 % NUM=8
%ENDBLOCK POSITIONS_FRAC

#MINSEP=1.5
user@machine_name$ cat Al.pp
1 12 6 2.5
Al
# Epsilon
1
# Sigma
2
# Beta
1
user@machine_name$ airss.pl -pp3 -max 3 -seed Al
user@machine_name$ ls -1
Al-43867-3302-1.res
Al-43867-3302-2.res
Al-43867-3302-3.res
Al-43867-3302.cell
Al.cell
Al.pp
user@machine_name$
\end{lstlisting}

\subsection{Relaxed with CASTEP}
It is officially recommended that AIRSS be used in combination with CASTEP, and a very complete interface between AIRSS and CASTEP is constructed.

To use CASTEP combined with AIRSS calculation, first you need to copy the successfully installed CASTEP executable file \verb|castep.serial| or \verb|castep.mpi| to the \verb|bin| directory of AIRSS, and rename it to \verb|castep|.

When using CASTEP combined with AIRSS calculation, in addition to *.cell, you also need to prepare *.param files. *.param is the configuration file of CASTEP, in which you can define the necessary configuration parameters during the calculation of CASTEP, including, the type of calculation (Structure optimization, self-consistency, calculation of optical properties, band calculation, etc.), charge, spin orientation, truncation energy, convergence criteria, etc. The file usually consists of several lines, each line contains a \verb|keyword| and its corresponding assignment.

\noindent\fcolorbox{mygray}[HTML]{E7E7E7}{\parbox{\textwidth}{%
\noindent \textbf{*.param files mainly have the following characteristics:}
\begin{maineu}
\item There is no restriction on the writing order between any two keywords.
\item You can use \# or; or! Or the word COMMENT to add comments.
\item All keywords and data set in *.param are not case-sensitive. At the same time, any punctuation (except for symbols that indicate the content of the comment), extra spaces and any blank lines will be automatically ignored.
\item At most one keyword and its corresponding parameter can appear in any line of the file.
\end{maineu}}}\\

The basic format of each line of the *.param file is:
\begin{lstlisting}
[keywords] : [value]
\end{lstlisting}
Among them, `\verb|:|' is added for beautiful writing and easy to distinguish content. It will be automatically ignored when the program is actually executed. You can also skip this symbol at all and replace it with a space.

For the definition and usage of \verb|[keywords]| in CASTEP, please refer to: \href{http://www.tcm.phy.cam.ac.uk/castep/documentation/WebHelp/content/modules/castep/keywords/k_main_structure.htm}{CASTEP cell keywords and data blocks}.

AIRSS combines CASTEP calculation by default, so run the following command to start the structure search.
\begin{lstlisting}[language={bash},numbers=left]
user@machine_name$ airss.pl -max 3 -seed Al
\end{lstlisting}

\subsection{Relax with VASP}
AIRSS comes with the \verb|airss.pl -vasp| option for joint VASP relaxation calculation. 
\begin{lstlisting}[language={bash},numbers=left]
user@machine_name$ airss.pl -vasp -max 3 -seed Al
\end{lstlisting}

However, the official interface needs to be improved in terms of parallel computing. Based on AIRSS, the author creates a set of bash commands as the interface to VASP, which is named \href{https://github.com/kYangLi/airss4vasp}{airss4vasp(a4v)}. Although I have considered rewrite this command set in python, but AIRSS itself cannot be used in Windows system. And, the replication project is quite large and has little improvement, so a4v is still mainly based on bash.\footnote{If you compare C++ to classical Chinese, python is equivalent to modern vernacular, and shell languages such as bash are spoken. Therefore, it is generally recommended to use python to write large-scale scripts.}

a4v can be regarded as a revised version of AIRSS. It can run independently without installing original AIRSS. It is mainly based on AIRSS's \verb|buildcell| module, and it also embeds PBS, NSCC, Slurm and other job submission system commands, which truly achieves one Key to submit the function of AIRSS+VASP task, and it also has better support for parallel calculation. For specific usage, please refer to the file \verb|README.md| inside the project. \footnote{In fact, the instruction manual is also in this project. (laughs}

In the *.cell file settings: a4v adds \verb|SD-XYZ|, \verb|SD-XY|, \verb|SD-X| and other atom labels that correspond to the fixed atomic position relaxation; at the same time deletes the original set the global parameters of the collinear spin value in buildcell, \verb|#SPIN=|. In addition, because VASP itself is not very friendly to cluster calculations, a4v does not integrate cluster calculation components (such as symmetry judgment components, etc.).

\newpage
\section{Data post-processing}
\subsection{*.res file structure}

The calculation results of AIRSS are all stored in the *.res file. This *.res structure file was first used in \href{https://strucbio.biologie.uni-konstanz.de/ccp4wiki/index.php/SHELXL}{SHELX}. Due to some historical reasons, it was reused by CASTEP and AIRSS. Because SHELX itself is a Windows-friendly program, the writing format of its input and output files also follows the characteristics of some Windows documents, such as the tendency to use uppercase letters, \verb|REM| stands for comment lines, and the file ends with \verb|END|.

\begin{lstlisting}[language={bash}]
user@machine_name$ cat Al-43867-3302-1.res
TITL Al-43867-3302-2 0.0000000004 60.4852769773 -53.2712053113 0 0 8 (P63/mmc) n - 1
REM
REM in /Users/alex/Documents/ProgramCode/MaterialCalculateProgram/AIRSS/airss-0.9/examples/1.1
REM
CELL 1.54180 2.2 5.2 5.2  86.6 90.0 90.0
LATT -1
SFAC Al 
Al     1  0.2544637028970  0.9316224149716  0.6657635302849 1.0
Al     1  0.7544640475988  0.0982890099295  0.3324301203388 1.0
Al     1  0.2544640470150  0.3482890078890  0.5824301202379 1.0
Al     1  0.2544640470479  0.8482890103459  0.0824301202324 1.0
Al     1  0.7544640476367  0.5982890097930  0.8324301190566 1.0
Al     1  0.7544637023180  0.1816224159838  0.9157635306900 1.0
Al     1  0.7544637024482  0.6816224143044  0.4157635299253 1.0
Al     1  0.2544637030384  0.4316224167828  0.1657635292340 1.0
END
user@machine_name$
\end{lstlisting}

\noindent\fcolorbox{mygray}[HTML]{E7E7E7}{\parbox{\textwidth}{%
\noindent \textbf{The meaning of each line in the *.res file output by AIRSS is as follows:}
\begin{maineu}
\item The first item in the first line of TITL is the name tag assigned by the software to the structure, the second item is the system's additional hydrostatic pressure (GPa), the third item is the unit cell volume, and the fourth item is the total of each unit cell Enthalpy (energy), the fifth term is the average value of the atomic spin value, the sixth term is the average value of the absolute value of the atomic spin, the seventh term is the total number of atoms in the system, and the eighth term is the name of the space group where the system is located. The last item is the fixed character n-1.
\item Afterwards, several lines beginning with REM are comment lines, which record the basic information generated by the file, and will not have any effect after deletion.
\item The line beginning with CELL records the basic unit cell information. Among them, the first item is a meaningless decimal, which is used to record the wavelength of the diffraction spectrum used to obtain the relevant structure in the original SHELX program. In AIRSS The middle is locked as a meaningless decimal. The second to fourth terms are lattice constants \(a\;b\;c\), and the next five to seven terms are crystal angles\(\alpha\;\beta\;\ gamma\).
\item The bottom line is LATT -1. This line is used in SHELX to calibrate the symmetry of the lattice, and it is locked to a fixed value of -1 in AIRSS.
\item The next line starting with SFAC records the names of all the elements that make up the system, and different elements are separated by a space.
\item The last few rows mark the positions of the atoms in the unit cell. The first column of these rows is the element symbol, the second column indicates the order in which the element appears in the SFAC row, and the third to fifth columns are the rows where the atoms are stored Fractional coordinates, the last column is the number of atoms occupied, generally set to 1.
\item The file ends with an END line.
\end{maineu}}}\\

\subsection{Data batch processing}
Once you have the calculation data *.res file, you can use the \verb|ca| command to process the data. \verb|ca| is the package of the basic analysis suite \verb|cryan| in AIRSS.
\begin{lstlisting}[language={bash}]
user@machine_name$ ca
ca [-R(recurcsive)] [command line arguments for cryan]
user@machine_name$
\end{lstlisting}

\verb|cryan| is used as follows:\footnote{For the sake of brevity, the description of the parameters has been simplified a little, please run the above command yourself to view more detailed information.}
\begin{lstlisting}[language={bash}]
user@machine_name$ cryan

Usage: cryan [OPTIONS]
The str. are read from STDIN, for example:

     cat *.res | cryan -s
     gunzip -c lots.res.gz | cryan -f H2O
     find . -name "*.res" | xargs cat | cryan -m

cryan options (note - the order matters):

 -r,  --rank                          Rank all str.
 -s,  --summary                       Summary
 -e,  --enthalpy <length_scale>       Plot enthalpy vs. pressure
 -f,  --formula <formula>             Select str. of a given com.
 -fc,  --formula_convert <formula>    Attempt to convert.
 -t,  --top [num]                     Output top few results
 -u,  --unite <thresh>                Unite similar str.
 -dr, --distance <rmax>               Distance threshold
 -de, --delta_e <energy>              Ignore str. above energy
 -sd, --struc_dos <smear>             Plot a structural DOS
 -p,  --pressure <pressure>           Additional pressure
 -m,  --maxwell                       Extract the stable com.
 -ph, --pressure_hull                 Ext. the stable str. with P
 -<n>                                 Component <n>
 -xg, --xmgrace                       Plot output with xmgrace
 -c,  --compare <thresh> <structure>  Compare structures
      --delete                        Delete unwanted str.
 -g,  --geometry [thresh]             Calculate the atomic geometry
 -n,  --num_units                     Report n separate str.
 -d,  --dimensionality                Report dD str.
 -cl, --cluster                       No periodic boundary
 -bl, --bondlength                    Maximum bond length
 -bs, --bondscale                     Bond length scaling
 -dm, --deltamodularity               Modularity bias parameter
 -wt, --weight                        Weight the adjacancy matrix
 -ns, --notsymm                       Clusters  point group off
 -sc, --struct_comm <thresh>          Determine the community str.
 -cm, --community                     Output the community str.
 -am, --adjacancymatrix               Output the adjacancy matrix
 -x,  --xyz                           Output clusters in XYZ format
 -o,  --off                           Output polyhedra in OFF
 -al, --alpha                         Construct alpha shapes
 -l,  --long                          Long names for str.
 -h,  --help, -?                      Print usage information
user@machine_name$
\end{lstlisting}

Use \verb|ca| to analyze the previous calculation results.
\begin{lstlisting}[language={bash}]
user@machine_name$ ca -r > analysis.data
user@machine_name$ cat analysis.data
Al-43867-3302-2   0.00  7.561  -6.659   8 Al  P63/mmc  1
Al-43867-3302-1  -0.00  7.561   0.000   8 Al  P63/mmc  1
Al-43867-3302-3   0.00  7.564   0.005   8 Al  Fm-3m    1
user@machine_name$
\end{lstlisting}

\noindent\fcolorbox{mygray}[HTML]{E7E7E7}{\parbox{\textwidth}{%
\noindent \textbf{In the above output result,}
\begin{maineu}
  \item The first column is the name tag assigned by the AIRSS software to the structure.
  \item The second column is the hydrostatic pressure value of the system(GPa).
  \item The third column is the volume of each chemical formula structural unit.
  \item 
  The first row of the fourth column is the total energy (enthalpy, eV/f.u.) of the corresponding structure, and the following rows are the energy difference relative to the first row under different structures.
  \item The fifth column is the total number of chemical formula structural units in the unit cell.
  \item The sixth column is the chemical formula of the structural unit.
  \item The seventh column is the space group name.
  \item The eighth column is the number of times the structure appears in all search results.
\end{maineu}}}\\

If you think there are too many results listed, you can use the \verb|-u| option, but note that \verb|-u| must be used before \verb|-r|. \footnote{In fact, all rows The parameters after the rank (-r) task are automatically ignored.} If you read the help information of \verb|cryan|, it is not difficult to find such a reminder: ``note-the order matters''.
\begin{lstlisting}[language={bash}]
user@machine_name$ ca -u 0.01 -r > analysis.data
user@machine_name$ cat analysis.data
Al-43867-3302-2   0.00  7.561  -6.659   8 Al  P63/mmc  2
Al-43867-3302-3   0.00  7.564   0.005   8 Al  Fm-3m    1
user@machine_name$
\end{lstlisting}

The number following the command \verb|ca -u| is a dimensionless ratio. This parameter can be simply understood as follows: It calibrates the lattice similarity threshold. The larger the value, the higher the tolerance. In the end, there are fewer different structures displayed. In more detail, the distance calibrated by this parameter is a multiple of the distance between the two closest atoms inside the atomic structure. For example, the two existing structures are very similar, and the shortest in the crystal lattice The bond length is 1.5 \r(A), then \verb|ca -u 0.1| means that the pairwise distances of the corresponding atoms of the two structures are compared in turn, if it is not found that these distance differences are greater than 0.15 \r(A) In this case, the two structures are the same as the calibration. \footnote{This paragraph description is just a superficial and intuitive explanation. The algorithm actually used is more complicated and stable. For details, see the source code ``airss-0.9.1/src/cryan/src/ cryan.f90'' line 2133.} This value can be adjusted according to needs, and it is recommended to choose between 0.1--0.01.

\end{document}